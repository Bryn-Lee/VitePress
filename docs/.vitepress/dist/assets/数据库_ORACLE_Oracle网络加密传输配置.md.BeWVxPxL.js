import{_ as i,c as a,o as t,a2 as n}from"./chunks/framework.CUJYCLAX.js";const p="/VitePress/assets/Pasted%20image%2020250212161952.B_M4BwbA.png",e="/VitePress/assets/Pasted%20image%2020250212162039.Du4XIrRb.png",g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"数据库/ORACLE/Oracle网络加密传输配置.md","filePath":"数据库/ORACLE/Oracle网络加密传输配置.md"}'),l={name:"数据库/ORACLE/Oracle网络加密传输配置.md"};function h(k,s,r,E,d,o){return t(),a("div",null,s[0]||(s[0]=[n(`<h2 id="非jdbc或oci-粗-jdbc客户端" tabindex="-1">非JDBC或OCI(粗)JDBC客户端 <a class="header-anchor" href="#非jdbc或oci-粗-jdbc客户端" aria-label="Permalink to &quot;非JDBC或OCI(粗)JDBC客户端&quot;">​</a></h2><p>客户端sqlnet.ora文件中增加配置</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.ENCRYPTION_CLIENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=accepted </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#表明客户端接受安全网络传输请求（默认值就是accepted）</span></span></code></pre></div><p>可选值:</p><p>rejected: 客户端拒绝任何安全网络传输连接请求</p><p>requested: 如果另一方请求或需要安全服务，则该安全服务将被激活</p><p>required: 只有当另一端接受安全网络传输时，客户端才接受连接</p><p>服务端sqlnet.ora文件中增加配置</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.ENCRYPTION_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=required</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.ENCRYPTION_TYPES_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&lt;encryption algorithm&gt;</span></span></code></pre></div><h2 id="瘦jdbc-客户端" tabindex="-1">瘦JDBC 客户端 <a class="header-anchor" href="#瘦jdbc-客户端" aria-label="Permalink to &quot;瘦JDBC 客户端&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerDriver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> oracle.jdbc.driver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OracleDriver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Properties props </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;oracle.net.encryption_client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;accepted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;oracle.net.encryption_types_client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RC4_128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XXX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YYY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jdbc:oracle:thin:@myhost:1521:mySID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, props);</span></span></code></pre></div><p>或</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;!-- 使用阿里巴巴的DruidDataSource配置针对Oracle数据库的JNDI数据源 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     &lt;Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jdbc/wb_oracle&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.alibaba.druid.pool.DruidDataSourceFactory&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Container&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javax.sql.DataSource&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            driverClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;oracle.jdbc.OracleDriver&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jdbc:oracle:thin:@myhost:1521:mySID?sqlnet.encryption_client=accepted&amp;amp;sqlnet.encryption_types_client=AES256&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wolf&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wolf&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            initialSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            maxActive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;5000&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            minIdle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;10&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            maxWait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;10000&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            maxOpenPreparedStatements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            validationQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;select 1 from dual&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            testOnBorrow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            testWhileIdle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            timeBetweenEvictionRunsMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;60000&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            removeAbandoned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            removeAbandonedTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;60&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            logAbandoned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stat,wall&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><h2 id="数据完整性设置" tabindex="-1">数据完整性设置 <a class="header-anchor" href="#数据完整性设置" aria-label="Permalink to &quot;数据完整性设置&quot;">​</a></h2><p>MD5 or SHA-1</p><p>客户端:</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_CLIENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = [ accepted | rejected | requested | required ] </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_TYPES_CLIENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = &lt;crypto_checksum_algorithms&gt;</span></span></code></pre></div><p>服务器端:</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = [ accepted | rejected | requested | required ] </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_TYPES_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = &lt;crypto_checksum_algorithms&gt;</span></span></code></pre></div><p>Oracle用户密码加密方式 Oracle 11g版本的加密口令存放在SYS．USER$表中的SPARE4列中，而PASSWORD列中仍保留以前版本加密口令。由于客户端计算加密口令需要用到SALT，在建立连接时，服务器端将SALT明文传送给客户端程序。Oracle 11g中新的口令加密算法中区分大小写；由于加入了随机数SALT，两个不同用户的口令即便完全相同，计算得到的SHA1的散列值也不同；不同DB中相同用户相同口令，SHA1散列值也可能不同。</p><h3 id="实际使用oracle传输加密配置" tabindex="-1">实际使用Oracle传输加密配置： <a class="header-anchor" href="#实际使用oracle传输加密配置" aria-label="Permalink to &quot;实际使用Oracle传输加密配置：&quot;">​</a></h3><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sqlnet.ora文件中做如下配置</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 服务器端</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.ENCRYPTION_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = REQUIRED </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#开启加密</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.ENCRYPTION_TYPES_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = AES128 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#采用AES对称加密算法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = REQUIRED </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#需要对数据完整性进行验证</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_TYPES_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = MD5 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#签名算法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#客户端</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_CLIENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = accepted</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQLNET.CRYPTO_CHECKSUM_TYPES_CLIENT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = MD5</span></span></code></pre></div><h2 id="抓包测试截图" tabindex="-1">抓包测试截图 <a class="header-anchor" href="#抓包测试截图" aria-label="Permalink to &quot;抓包测试截图&quot;">​</a></h2><p>未加密： <img src="`+p+'" alt=""></p><p>配置加密后： <img src="'+e+'" alt=""></p><p>官网：<a href="https://docs.oracle.com/cd/B28359_01/network.111/b28530/asoappd.htm#g635886" target="_blank" rel="noreferrer">https://docs.oracle.com</a></p><p>wiki资源：<a href="http://www.orafaq.com/wiki/Network_Encryption" target="_blank" rel="noreferrer">http://www.orafaq.com/wiki/Network_Encryption</a></p><p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dbseg/release-changes.html#GUID-D394F71C-1D9F-41F1-A8FA-FCDED20666FD" target="_blank" rel="noreferrer">https://docs.oracle.com/en/database/oracle/oracle-database/19/dbseg/release-changes.html#GUID-D394F71C-1D9F-41F1-A8FA-FCDED20666FD</a></p>',28)]))}const y=i(l,[["render",h]]);export{g as __pageData,y as default};
