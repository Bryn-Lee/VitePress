import{_ as a,c as i,o as n,a2 as l}from"./chunks/framework.Gmd0D3gy.js";const c=JSON.parse('{"title":"安装过程","description":"","frontmatter":{},"headers":[],"relativePath":"数据库/ORACLE/CentOS7安装Oracle11gR2.md","filePath":"数据库/ORACLE/CentOS7安装Oracle11gR2.md"}'),p={name:"数据库/ORACLE/CentOS7安装Oracle11gR2.md"};function h(t,s,e,k,r,d){return n(),i("div",null,s[0]||(s[0]=[l(`<h1 id="安装过程" tabindex="-1">安装过程 <a class="header-anchor" href="#安装过程" aria-label="Permalink to &quot;安装过程&quot;">​</a></h1><h3 id="创建运行oracle数据库的系统用户和用户组" tabindex="-1">创建运行oracle数据库的系统用户和用户组 <a class="header-anchor" href="#创建运行oracle数据库的系统用户和用户组" aria-label="Permalink to &quot;创建运行oracle数据库的系统用户和用户组&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1.切换到root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2.创建用户组oinstall</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oinstall</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3.创建用户组dba</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dba</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4.创建oracle用户，并加入到oinstall和dba用户组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oinstall</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dba</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5.修改oracle密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">＃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6.查看用户组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span></span></code></pre></div><blockquote><p>关于创建oinstall用户组及dba组的用途，可参考<a href="http://www.oracle.com/technetwork/cn/articles/hunter-rac11gr2-iscsi-2-092412-zhs.html#13" target="_blank" rel="noreferrer">此链接</a>。</p><ul><li>理论上单例安装需要3种用户组，实际只建两个oinstall和dba，后面再安装oracle数据库的时候把OSOPER组也设置是dba组。</li><li>下面是关于三个用户组的介绍:</li></ul><blockquote><ol><li><strong>oracle清单组</strong>（一般为oinstall):<br> 被视为 Oracle 软件的**“所有者”**，拥有对 Oracle 中央清单 (oraInventory) 的写入权限。在一个 Linux 系统上首次安装 Oracle 软件时，OUI 会创建 <strong>/etc/oraInst.loc</strong> 文件。该文件指定 Oracle 清单组的名称（默认为 oinstall）以及 Oracle 中央清单目录的路径。</li><li><strong>数据库管理员组</strong>（OSDBA，一般为 dba）:<br> 可通过操作系统身份验证使用 SQL 以 SYSDBA 身份连接到一个 Oracle 实例。该组的成员可执行关键的数据库管理任务，如创建数据库、启动和关闭实例。该组的默认名称为dba。<strong>SYSDBA</strong>系统权限甚至在数据库未打开时也允许访问数据库实例。对此权限的控制完全超出了数据库本身的范围。<br> 不要混淆 <strong>SYSDBA</strong> 系统权限与数据库角色 <strong>DBA</strong> 。<strong>DBA</strong> 角色不包括 <strong>SYSDBA</strong> 或 <strong>SYSOPER</strong> 系统权限。</li><li><strong>数据库操作员组</strong>（OSOPER，一般为 oper）:<br> 可通过操作系统身份验证使用 SQL 以 <strong>SYSOPER</strong> 身份连接到一个 Oracle 实例。这个可选组的成员拥有一组有限的数据库管理权限，如管理和运行备份。<br> 该组的默认名称为<strong>oper</strong>，SYSOPER 系统权限甚至在数据库未打开时也允许访问数据库实例。对此权限的控制完全超出了数据库本身的范围。</li></ol></blockquote></blockquote><h3 id="创建oracle数据库安装目录" tabindex="-1">创建oracle数据库安装目录 <a class="header-anchor" href="#创建oracle数据库安装目录" aria-label="Permalink to &quot;创建oracle数据库安装目录&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建安装文件夹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># oracle:数据库安装目录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># oraInventory:数据库配置文件目录</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># database:据库软件包解压目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/{oracle,oraInventory,database}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#设置目录所有者为oinstall用户组的oracle用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle:oinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/oracle　　</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle:oinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/oraInventory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle:oinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/database</span></span></code></pre></div><h3 id="修改操作系统系统标识" tabindex="-1">修改操作系统系统标识 <a class="header-anchor" href="#修改操作系统系统标识" aria-label="Permalink to &quot;修改操作系统系统标识&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看内核版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看发行版</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/redhat-release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改发行版（若为centos7.xx 修改为 redhat-7）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/redhat-release</span></span></code></pre></div><blockquote><p>修改系统标识的原因：oracle不支持centos，详情可参考<a href="https://docs.oracle.com/cd/E11882_01/install.112/e47689/pre_install.htm#LADBI1106" target="_blank" rel="noreferrer">此链接</a>。</p></blockquote><h3 id="安装相关依赖" tabindex="-1">安装相关依赖 <a class="header-anchor" href="#安装相关依赖" aria-label="Permalink to &quot;安装相关依赖&quot;">​</a></h3><div class="language-language vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">language</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo yum -y install binutils* compat-libcap1* compat-libstdc++* gcc* gcc-c++* glibc* glibc-devel* ksh* libaio* libaio-devel* libgcc* libstdc++* libstdc++-devel* libXi* libXtst* make* sysstat* elfutils* unixODBC*</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 若 ceontos8 出现 There was an error trying to initialize the HPI library.</span></span>
<span class="line"><span># 执行如下指令</span></span>
<span class="line"><span>sudo yum -y install xz wget gcc-c++ ncurses ncurses-devel \\</span></span>
<span class="line"><span>cmake make perl openssl openssl-devel gcc* libxml2 \\</span></span>
<span class="line"><span>libxml2-devel curl-devel libjpeg* libpng* freetype* \\</span></span>
<span class="line"><span>make gcc-c++ cmake bison perl perl-devel perl perl-devel \\</span></span>
<span class="line"><span>glibc-devel.i686 glibc-devel libaio readline-devel \\</span></span>
<span class="line"><span>zlib.x86_64 zlib-devel.x86_64 libcurl-* net-tool* \\</span></span>
<span class="line"><span>sysstat lrzsz dos2unix telnet.x86_64 iotop unzip \\</span></span>
<span class="line"><span>ftp.x86_64 xfs* expect vim psmisc openssh-client* \\</span></span>
<span class="line"><span>libaio bzip2 epel-release automake binutils bzip2 \\</span></span>
<span class="line"><span>elfutils expat gawk gcc --skip-broken ksh less make openssh-server \\</span></span>
<span class="line"><span>rpm sysstat unzip unzip cifs-utils libXext.x86_64 \\</span></span>
<span class="line"><span>glibc.i686 binutils compat-libstdc++-33 \\</span></span>
<span class="line"><span>elfutils-libelf elfutils-libelf-devel \\</span></span>
<span class="line"><span>expat gcc gcc-c++ glibc glibc-common \\</span></span>
<span class="line"><span>glibc-devel glibc-headers libaio \\</span></span>
<span class="line"><span>libaio-devel libgcc libstdc++ libstdc++-devel \\</span></span>
<span class="line"><span>make sysstat unixODBC unixODBC-devel libnsl</span></span></code></pre></div><blockquote><p>以上指令基本可以安装所有依赖，oracle11g所需依赖可参考该<a href="https://docs.oracle.com/cd/E11882_01/install.112/e47689/pre_install.htm#BABCFJFG" target="_blank" rel="noreferrer">链接</a>。</p></blockquote><h4 id="安装过程中可能出现的错误" tabindex="-1">安装过程中可能出现的错误 <a class="header-anchor" href="#安装过程中可能出现的错误" aria-label="Permalink to &quot;安装过程中可能出现的错误&quot;">​</a></h4><ol><li>error in invoking target install of makefile ... <strong>ins_ctx.mk</strong>,需要安装如下依赖。</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glibc-devel.i686</span></span></code></pre></div><h3 id="关闭防火墙" tabindex="-1">关闭防火墙 <a class="header-anchor" href="#关闭防火墙" aria-label="Permalink to &quot;关闭防火墙&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre></div><h3 id="关闭selinux-需要重启系统" tabindex="-1">关闭selinux（需要重启系统） <a class="header-anchor" href="#关闭selinux-需要重启系统" aria-label="Permalink to &quot;关闭selinux（需要重启系统）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  修改配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/selinux/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改如下配置，此处修改为disabled</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SELINUX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启系统(若本身配置为disabled，无需重启)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div><h3 id="修改内核参数" tabindex="-1">修改内核参数 <a class="header-anchor" href="#修改内核参数" aria-label="Permalink to &quot;修改内核参数&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加入如下配置信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.icmp_echo_ignore_broadcasts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.conf.all.rp_filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fs.file-max</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6815744</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #设置最大打开文件数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fs.aio-max-nr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1048576</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kernel.shmall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2097152</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #共享内存的总量，8G内存设置：2097152*4k/1024/1024</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kernel.shmmax</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2147483648</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #最大共享内存的段大小</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kernel.shmmni</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #整个系统共享内存端的最大数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kernel.sem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 250</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 128</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.ip_local_port_range</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 9000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 65500</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #可使用的IPv4端口范围</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.core.rmem_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 262144</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.core.rmem_max</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4194304</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.core.wmem_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 262144</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.core.wmem_max</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1048576</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置参数生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div><h3 id="对oracle用户设置限制-提高软件运行性能。" tabindex="-1">对oracle用户设置限制，提高软件运行性能。 <a class="header-anchor" href="#对oracle用户设置限制-提高软件运行性能。" aria-label="Permalink to &quot;对oracle用户设置限制，提高软件运行性能。&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/security/limits.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#找到 @student 在 @student 和 End of file之间添加如下内容</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#@student        -       maxlogins       4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oracle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> soft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nproc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2047</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oracle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nproc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16384</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oracle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> soft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nofile</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oracle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nofile</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># End of file</span></span></code></pre></div><h3 id="配置oracle用户变量" tabindex="-1">配置Oracle用户变量 <a class="header-anchor" href="#配置oracle用户变量" aria-label="Permalink to &quot;配置Oracle用户变量&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/oracle/.bash_profile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 文件末尾追加如下配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORACLE_BASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/data/oracle </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#oracle数据库安装目录</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORACLE_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ORACLE_BASE/product/11.2.0/db_1 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#oracle数据库路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORACLE_SID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orcl </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#oracle启动数据库实例名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORACLE_TERM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xterm </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#xterm窗口模式安装</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ORACLE_HOME/bin:/usr/sbin:$PATH </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#添加系统环境变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ORACLE_HOME/lib:/lib:/usr/lib </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#添加系统环境变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LANG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#防止安装过程出现乱码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NLS_LANG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AMERICAN_AMERICA.ZHS16GBK  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#设置Oracle客户端字符集，必须与Oracle安装时设置的字符集保持一致，如：ZHS16GBK，否则出现</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使配置立即生效</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/oracle/.bash_profile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#重启系统</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div><blockquote><p>接下来的操作需要用到桌面系统，参考<a href="http://blog.rovan.site/archives/2020031901" target="_blank" rel="noreferrer">本文</a>进行安装</p></blockquote><h3 id="上传安装包并解压" tabindex="-1">上传安装包并解压 <a class="header-anchor" href="#上传安装包并解压" aria-label="Permalink to &quot;上传安装包并解压&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 逐个上传</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux.x64_11gR2_database_1of2.zip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle@xxx.xxx.xxx.xxx:/home/oracle</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux.x64_11gR2_database_2of2.zip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle@xxx.xxx.xxx.xxx:/home/oracle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 解压到指定路径</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux.x64_11gR2_database_1of2.zip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/database/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux.x64_11gR2_database_2of2.zip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/database/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改所有权</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle:oinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/database/database/</span></span></code></pre></div><h3 id="安装oracle" tabindex="-1">安装Oracle <a class="header-anchor" href="#安装oracle" aria-label="Permalink to &quot;安装Oracle&quot;">​</a></h3><h4 id="_1-使用oracle用户登录桌面-安装" tabindex="-1">1. 使用oracle用户登录桌面，安装 <a class="header-anchor" href="#_1-使用oracle用户登录桌面-安装" aria-label="Permalink to &quot;1. 使用oracle用户登录桌面，安装&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行安装程序</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/database/database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./runInstaller</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果弹出对话框过小可以使用jdk8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./runInstaller</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jreLoc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/jdk1.8.0_241/jre</span></span></code></pre></div><h4 id="_2-设置不需要安全更新" tabindex="-1">2. 设置不需要安全更新 <a class="header-anchor" href="#_2-设置不需要安全更新" aria-label="Permalink to &quot;2. 设置不需要安全更新&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step1-c57cac8fe8a940d9bc8ec794d709a94b.png" alt="ora_install_step1"></p><h4 id="_3-选择只安装数据库软件" tabindex="-1">3. 选择只安装数据库软件 <a class="header-anchor" href="#_3-选择只安装数据库软件" aria-label="Permalink to &quot;3. 选择只安装数据库软件&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step2-b9d164a0be1a400cb578066094e35d04.png" alt="ora_install_step2"></p><h4 id="_4-选择单例安装" tabindex="-1">4. 选择单例安装 <a class="header-anchor" href="#_4-选择单例安装" aria-label="Permalink to &quot;4. 选择单例安装&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step3-bf0ae0e6ced44b6cb6e3941a34a2f7cb.png" alt="ora_install_step3"></p><h4 id="_5-添加语言" tabindex="-1">5. 添加语言 <a class="header-anchor" href="#_5-添加语言" aria-label="Permalink to &quot;5. 添加语言&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step4-83eade42532e49428e5d55f96db468ac.png" alt="ora_install_step4">)</p><h4 id="_6-选择安装企业版本" tabindex="-1">6. 选择安装企业版本 <a class="header-anchor" href="#_6-选择安装企业版本" aria-label="Permalink to &quot;6. 选择安装企业版本&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step5-2c7dfd7ee2fb4f48a3040beae3689b83.jpg" alt="ora_install_step5"></p><h4 id="_7-数据软件的安装路径-自动读取前面oracle环境变量中配置的值。" tabindex="-1">7. 数据软件的安装路径，自动读取前面Oracle环境变量中配置的值。 <a class="header-anchor" href="#_7-数据软件的安装路径-自动读取前面oracle环境变量中配置的值。" aria-label="Permalink to &quot;7. 数据软件的安装路径，自动读取前面Oracle环境变量中配置的值。&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step6-660f2ceb52784c5b8546a400c48546e5.png" alt="ora_install_step6"></p><h4 id="_8-理论上要创建oper用户组-这里直接采用dba用户组" tabindex="-1">8.理论上要创建oper用户组,这里直接采用dba用户组 <a class="header-anchor" href="#_8-理论上要创建oper用户组-这里直接采用dba用户组" aria-label="Permalink to &quot;8.理论上要创建oper用户组,这里直接采用dba用户组&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step7-b5e889caec204d8a90443abc41956614.png" alt="ora_install_step7"></p><h4 id="_9-安装检查-按照提示信息逐个解决-没有致命错误建议忽略" tabindex="-1">9. 安装检查，按照提示信息逐个解决（没有致命错误建议忽略） <a class="header-anchor" href="#_9-安装检查-按照提示信息逐个解决-没有致命错误建议忽略" aria-label="Permalink to &quot;9. 安装检查，按照提示信息逐个解决（没有致命错误建议忽略）&quot;">​</a></h4><blockquote><p>虚拟内存可以根据实际情况选择添加，参见此<a href="http://blog.rovan.site/archives/2020022902" target="_blank" rel="noreferrer">链接</a></p></blockquote><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step8-d9013086fe8a41d382f2251592cc20e5.png" alt="ora_install_step8"><br><img src="http://blog.rovan.site/upload/2020/3/ora_install_step9-074e287606a8413e974e8335079de8d8.png" alt="ora_install_step9"></p><h4 id="_10-准备完毕-点击-finish-开始安装" tabindex="-1">10. 准备完毕，点击“Finish”开始安装 <a class="header-anchor" href="#_10-准备完毕-点击-finish-开始安装" aria-label="Permalink to &quot;10. 准备完毕，点击“Finish”开始安装&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step10-df91d942251f49729f1ce52aa74a167a.png" alt="ora_install_step10"></p><h4 id="_11-安过程中可能弹出几次提示-将提示窗口拉大才能看清-按照提示解决问题即可。" tabindex="-1">11. 安过程中可能弹出几次提示，将提示窗口拉大才能看清，按照提示解决问题即可。 <a class="header-anchor" href="#_11-安过程中可能弹出几次提示-将提示窗口拉大才能看清-按照提示解决问题即可。" aria-label="Permalink to &quot;11. 安过程中可能弹出几次提示，将提示窗口拉大才能看清，按照提示解决问题即可。&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step11-c4b311b58f6441328eb2bb4dada82e10.png" alt="ora_install_step11"></p><ul><li>关于 <code>Error in invoking target &#39;agent nmhs&#39; of makefile /data/oracle/product/11.2.0/db_1/sysman/lib/ins_emagent.mk</code> 问题可以参照此<a href="http://blog.itpub.net/29475508/viewspace-2120836/" target="_blank" rel="noreferrer">文章</a>。</li></ul><h4 id="_12-安装成功" tabindex="-1">12. 安装成功 <a class="header-anchor" href="#_12-安装成功" aria-label="Permalink to &quot;12. 安装成功&quot;">​</a></h4><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_step12-ca6021762887466faa205a55b85b6025.png" alt="ora_install_step12"></p><h3 id="配置oracle" tabindex="-1">配置Oracle <a class="header-anchor" href="#配置oracle" aria-label="Permalink to &quot;配置Oracle&quot;">​</a></h3><h4 id="使用配置文件配置" tabindex="-1">使用配置文件配置 <a class="header-anchor" href="#使用配置文件配置" aria-label="Permalink to &quot;使用配置文件配置&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动监听器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsnrctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建实例（建库）</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/oracle/product/11.2.0/db_1/inventory/response/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dbca.rsp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dbca.rsp.bak</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dbca.rsp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改如下内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GDBNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;orcl&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;orcl&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CHARACTERSET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;AL32UTF8&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SYSPASSWORD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;123456&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #指定sys用户密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SYSTEMPASSWORD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;123456&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #指定system用户密码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#赋权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a+x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dbca.rsp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dbca</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -silent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -responseFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> etc/dbca.rsp</span></span></code></pre></div><blockquote><p>推荐有安装经验者直接使用配置文件进行安装，需要注意的是配置<strong>密码</strong>时不要包含 <strong>“@”</strong>，具体情况可参见<a href="https://stackoverflow.com/questions/4646752/ora-12532-tnsinvalid-argument" target="_blank" rel="noreferrer">文章</a>。</p></blockquote><h4 id="使用图形化配置" tabindex="-1">使用图形化配置 <a class="header-anchor" href="#使用图形化配置" aria-label="Permalink to &quot;使用图形化配置&quot;">​</a></h4><ul><li>图形化配置可参考此<a href="https://www.jianshu.com/p/74c677c49c82" target="_blank" rel="noreferrer">文章</a>。</li></ul><ol start="2"><li>配置监听</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netca</span></span></code></pre></div><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_netca-2b5e393a95a84b92b26bc79a9a2e0f3f.png" alt="ora_install_netca"></p><ol start="3"><li>配置实例</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dbca</span></span></code></pre></div><p><img src="http://blog.rovan.site/upload/2020/3/ora_install_dbca-dcd82b0d447a4f56a4a2ab7bf3c609b7.png" alt="ora_install_dbca"></p><h4 id="关于打补丁" tabindex="-1">关于打补丁 <a class="header-anchor" href="#关于打补丁" aria-label="Permalink to &quot;关于打补丁&quot;">​</a></h4><p>在导入数据时可能会出现<code>Oracle ORA-14102: 只能指定一个 LOGGING 或 NOLOGGING 子句</code>的错误，需要打补丁。补丁安装教程参照此<a href="https://www.cnblogs.com/badmemoryneedbadpen/p/4642675.html" target="_blank" rel="noreferrer">文章</a>。</p><ul><li>补丁下载大部分收费，知道具体补丁号可去此<a href="https://www.4shared.com/" target="_blank" rel="noreferrer">网站</a>下载。</li><li>关于 ORA-14102 解决补丁，可从此处下载。 <ol><li>opatch<code>11.0.0.3.15</code> <a href="http://blog.rovan.site/upload/2020/3/p6880880_112000_Linux-x86-64%2011.2.0.3.15-a1f556da06df4c08b5101783cd010235.zip" target="_blank" rel="noreferrer">p6880880_112000_Linux-x86-64.zip</a></li><li>补丁<code>12419378</code> <a href="http://blog.rovan.site/upload/2020/3/p12419378_112010_Linux-x86-64-27e3d3be289d4383bcaf12bbca373c44.zip" target="_blank" rel="noreferrer">p12419378_112010_Linux-x86-64.zip</a></li><li>补丁<code>8795792</code>可不安装，在<code>12419378</code>中包含 <a href="http://blog.rovan.site/upload/2020/3/p8795792_112010_Generic-e2a3fc2fdbda42bdb46aa354338990f5.zip" target="_blank" rel="noreferrer">p8795792_112010_Generic.zip</a></li></ol></li></ul><h4 id="设置数据库实例开机启动" tabindex="-1">设置数据库实例开机启动 <a class="header-anchor" href="#设置数据库实例开机启动" aria-label="Permalink to &quot;设置数据库实例开机启动&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rc.d/rc.local</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加入如下内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lsnrctl start&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dbstart&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 因为在centos7中rc.local的权限被降低了，所以需要赋予其可执行权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rc.d/rc.local</span></span></code></pre></div><h4 id="常见操作" tabindex="-1">常见操作 <a class="header-anchor" href="#常见操作" aria-label="Permalink to &quot;常见操作&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动监听</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsnrctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入sqlplus</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqlplus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /nolog</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接到sysdba</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">conn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysdba</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">startup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 数据库启动使用startup命令，有三种情况：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    第一种：不带参数，启动数据库实例并打开数据库，以便用户使用数据库，在多数情况下，使用这种方式！</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    第二种：带nomount参数，只启动数据库实例，但不打开数据库，在你希望创建一个新的数据库时使用，或者在你需要这样的时候使用！</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    第三种：带mount参数，在进行数据库更名的时候采用。这个时候数据库就打开并可以使用了！</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭数据库实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> immediate</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#shutdown有四个参数，四个参数的含义如下：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    Normal 需要在所有连接用户断开后才执行关闭数据库任务，所以有的时候看起来好象命令没有运行一样！在执行这个命令后不允许新的连接</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    Immediate 等待用户完成当前的语句，在用户执行完正在执行的语句后就断开用户连接，并不允许新用户连接。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    Transactional 等待用户完成当前的事务，在拥护执行完当前事物后断开连接，并不允许新的用户连接数据库。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    Abort 不做任何等待，直接关闭数据库，执行强行断开连接并直接关闭数据库。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看实例名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name from v$database;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">elect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> instance_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$instance;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看当前使用的数据文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name from v$datafile;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改用户密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> identified</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ******</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 解锁用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> account</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="配置备份目录及导入导出" tabindex="-1">配置备份目录及导入导出 <a class="header-anchor" href="#配置备份目录及导入导出" aria-label="Permalink to &quot;配置备份目录及导入导出&quot;">​</a></h4><ol start="4"><li>配置目录</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建数据备份还原使用的文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/oracle/bak_dir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用数据库管理员用户登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqlplus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysdba</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/data/oracle/bak_dir&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dba_directories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 给普通用户赋使用权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">grant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read,write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> someone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><ol start="5"><li>导入导出</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入数据 方式一</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># table_exists_action : SKIP、APPEND、REPLACE、TRUNCATE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">impdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username/password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> table_exists_action=replace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_schema=sourceUser:targetUser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=20200324.DMP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile=20200324.log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> full=y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_tablespace=sourceTableSpace:targetTablespace</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入数据 方式二</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># transform=oid:n 生成新的oid 解决 ORA-02304 ORA-02304: invalid object identifier literal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">impdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username/password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> table_exists_action=replace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_schema=sourceUser:targetUser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=20200324.DMP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile=20200324.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入示例：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IMP_FULL_DATABASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bsft01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read,write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bsft01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">impdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bsft01/bsft01@amoebadb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_schema=amoeba02:bsft01</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=AMOEBA200324.DMP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile=bsft01_imp.log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLE_EXISTS_ACTION=REPLACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transform=oid:n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remap_tablespace=EAS_D_AMOEBA02_STANDARD:EAS_D_BSFT01_STANDARD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导出数据 方式一</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 赋文件夹操作权限 grant read,write on directory bak_dir to user;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入需要赋导入权限（及文件夹操作权限） grant IMP_FULL_DATABASE to user;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除权限 revoke read,write on directory from user;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username/password@orcl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schemas=user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory=bak_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dumpfile=20200323.dmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile=20200323.log</span></span></code></pre></div><h3 id="表空间操作" tabindex="-1">表空间操作 <a class="header-anchor" href="#表空间操作" aria-label="Permalink to &quot;表空间操作&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加表空间示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ALTER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  EAS_D_XXXX_STANDARD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/oracleData/EAS_D_XXXX_STANDARD1.ORA&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 500M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AUTOEXTEND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  NEXT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MAXSIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UNLIMITED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ALTER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  EAS_D_XXXX_STANDARD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/oracleData/EAS_D_XXXX_STANDARD2.ORA&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 500M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AUTOEXTEND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  NEXT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MAXSIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UNLIMITED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除用户及表空间示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tablespace_name from dba_tablespaces;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxxx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cascade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXXX_TEMP2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INCLUDING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONTENTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXXX_STANDARD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INCLUDING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONTENTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_T_XXXX_STANDARD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INCLUDING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONTENTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLESPACE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXXX_INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INCLUDING</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONTENTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATAFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加临时表空间示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> temporary</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tablespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXX_TEMP3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tempfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/oracleData/EAS_D_XXX_TEMP3.dbf&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1024M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoextend</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> temporary</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tablespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXX_TEMP3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除表空间的数据文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tablespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EAS_D_XXX_STANDARD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> drop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> datafile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;/oracleData/EAS_D_XXX_STANDARD.ora&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div>`,81)]))}const g=a(p,[["render",h]]);export{c as __pageData,g as default};
