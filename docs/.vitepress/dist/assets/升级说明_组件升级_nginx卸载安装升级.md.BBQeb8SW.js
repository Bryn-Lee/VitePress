import{_ as i,c as a,o as n,a2 as l}from"./chunks/framework.CUJYCLAX.js";const c=JSON.parse('{"title":"升级 Nginx 到 1.24.0-1 版本操作示例","description":"","frontmatter":{},"headers":[],"relativePath":"升级说明/组件升级/nginx卸载安装升级.md","filePath":"升级说明/组件升级/nginx卸载安装升级.md"}'),e={name:"升级说明/组件升级/nginx卸载安装升级.md"};function t(h,s,p,k,d,g){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="升级-nginx-到-1-24-0-1-版本操作示例" tabindex="-1">升级 Nginx 到 1.24.0-1 版本操作示例 <a class="header-anchor" href="#升级-nginx-到-1-24-0-1-版本操作示例" aria-label="Permalink to &quot;升级 Nginx 到 1.24.0-1 版本操作示例&quot;">​</a></h1><p>本文以升级 Nginx 版本为 1.24.0-1 为例，其他版本可参考此文档进行操作。</p><h2 id="步骤" tabindex="-1">步骤： <a class="header-anchor" href="#步骤" aria-label="Permalink to &quot;步骤：&quot;">​</a></h2><h3 id="_1-备份-nginx-配置文件及证书" tabindex="-1">1. 备份 Nginx 配置文件及证书 <a class="header-anchor" href="#_1-备份-nginx-配置文件及证书" aria-label="Permalink to &quot;1. 备份 Nginx 配置文件及证书&quot;">​</a></h3><p>在进行升级前，备份以下重要文件：</p><ul><li>Nginx 配置文件</li><li>SSL 证书文件</li></ul><h3 id="_2-检查-nginx-服务状态" tabindex="-1">2. 检查 Nginx 服务状态 <a class="header-anchor" href="#_2-检查-nginx-服务状态" aria-label="Permalink to &quot;2. 检查 Nginx 服务状态&quot;">​</a></h3><p>使用以下命令检查 Nginx 服务是否在运行，并停止服务：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p>若 Nginx 正在运行，停止 Nginx 服务：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><h3 id="_3-查找并删除-nginx-相关文件" tabindex="-1">3. 查找并删除 Nginx 相关文件 <a class="header-anchor" href="#_3-查找并删除-nginx-相关文件" aria-label="Permalink to &quot;3. 查找并删除 Nginx 相关文件&quot;">​</a></h3><ul><li>查找 Nginx 文件位置：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whereis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p>示例输出：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/sbin/nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib64/nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/man/man8/nginx.8.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/man/man3/nginx.3pm.gz</span></span></code></pre></div><ul><li>使用 <code>find</code> 命令查找所有 Nginx 相关文件：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><p>示例输出：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/lib64/perl5/vendor_perl/auto/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/lib64/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/share/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/sbin/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/lib/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/log/nginx</span></span></code></pre></div><ul><li>逐一删除查找到的相关文件和目录：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/sbin/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib64/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/share/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/nginx</span></span></code></pre></div><h3 id="_4-下载-rpm-离线安装包" tabindex="-1">4. 下载 RPM 离线安装包 <a class="header-anchor" href="#_4-下载-rpm-离线安装包" aria-label="Permalink to &quot;4. 下载 RPM 离线安装包&quot;">​</a></h3><p>从 Nginx 官方网站下载对应版本的 RPM 包：</p><ul><li>下载地址：<a href="http://nginx.org/packages/centos/7/x86_64/RPMS/" target="_blank" rel="noreferrer">http://nginx.org/packages/centos/7/x86_64/RPMS/</a></li><li>下载文件：<code>nginx-1.24.0-1.el7.ngx.x86_64.rpm</code></li></ul><h3 id="_5-安装-nginx-新版本" tabindex="-1">5. 安装 Nginx 新版本 <a class="header-anchor" href="#_5-安装-nginx-新版本" aria-label="Permalink to &quot;5. 安装 Nginx 新版本&quot;">​</a></h3><ul><li>将下载好的 RPM 包上传至服务器，进入对应目录，执行安装命令：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ivh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-1.24.0-1.el7.ngx.x86_64.rpm</span></span></code></pre></div><ul><li>将之前备份的配置文件放回 <code>/etc/nginx/conf.d/</code> 目录。</li><li>将备份的证书文件放入 <code>/etc/nginx/certs/</code> 目录。</li><li>修改配置文件中的证书路径为新文件位置。</li></ul><h3 id="_6-安装目录" tabindex="-1">6. 安装目录 <a class="header-anchor" href="#_6-安装目录" aria-label="Permalink to &quot;6. 安装目录&quot;">​</a></h3><ul><li>Nginx 安装目录：<code>/etc/nginx/</code></li><li>Nginx 配置目录：<code>/etc/nginx/conf.d/</code></li><li>Nginx 证书目录：<code>/etc/nginx/certs/</code></li><li>Nginx 可执行文件：<code>/usr/bin/nginx</code></li></ul><h3 id="_7-后续版本升级" tabindex="-1">7. 后续版本升级 <a class="header-anchor" href="#_7-后续版本升级" aria-label="Permalink to &quot;7. 后续版本升级&quot;">​</a></h3><p>若需要升级到新版本，使用以下命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Uvh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 新版本rpm包</span></span></code></pre></div><h3 id="_8-常用命令" tabindex="-1">8. 常用命令 <a class="header-anchor" href="#_8-常用命令" aria-label="Permalink to &quot;8. 常用命令&quot;">​</a></h3><ul><li>查看 Nginx 版本及安装路径：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span></code></pre></div><ul><li>查看 Nginx 服务状态：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><ul><li>启动 Nginx 服务：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><ul><li>重启 Nginx 服务：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><ul><li>停止 Nginx 服务：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><ul><li>卸载 Nginx：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div>`,47)]))}const o=i(e,[["render",t]]);export{c as __pageData,o as default};
