## 适用场景

由于账户整合各个历史系统中的影像资料，对于自然人的证件正反存在理解上差异，导致历史数据中存在人像面为正面，国徽面为正面的历史数据。需要通过文件识别统一纠正。账户系统后续统称为 国徽面和人像面，不再做正反面的描述，防止歧义。

## 数据筛选

在账户数据库中，执行以下sql语句，查询出所有结果，导出TSV文件，命名为 file_list.tsv，

```sql
select DETAIL_ID || substr(t.file_path, instr(t.file_path, '.')) as "name",
       FILE_PATH as "path"
  from cf_match.t_client_business_dossiers t
 where t.dossiers_type = '110001'
    or t.dossiers_type = '110002';
```

![](attachments/Pasted%20image%2020250214152652.png)

## 文件导出

上传 file_list.tsv 和 archive.sh 至文件存储的服务器，上传目标文件夹需要磁盘空间充足，方便文件提取。

赋予 archive.sh 执行权限，执行,运行完成后会生成压缩文件 archive.zip,将archive.zip 下载至  win 环境解压。

```shell
[root@localhost unicenter]# chmod  +x  archive.sh
[root@localhost unicenter]# ./archive.sh
```



## 处理识别数据

运行 Umi-OCR.exe，选择批量OCR

按照图片设置

![](attachments/Pasted%20image%2020250214152639.png)

将解压的archive.zip 文件夹，拖入左侧，待加载完成后，开始任务。

注意：建议使用多核性能优的win机器，可以加快识别效率。

## 更新档案数据

识别完成后，找到识别结果的CSV 文件，将文件导入数据库，进行数据处理。

使用CF_MATCH.T_TEMP_OCR.sql 创建表

使用 plsql，工具>文本导入器

![](attachments/Pasted%20image%2020250214152715.png)





![](attachments/Pasted%20image%2020250214152727.png)



检查导入的字段数据，确认无误后，注意中文乱码。操作导入，等待数据导入完成。

![](attachments/Pasted%20image%2020250214152738.png)

数据导入完成后，执行  识别结果处理.sql。

查看CF_MATCH.T_TEMP_OCR 中 dossiers_type 为空的数据，进行调整。

最后执行 客户数据处理.sql
